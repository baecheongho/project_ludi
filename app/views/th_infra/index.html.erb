<!DOCTYPE html>
<html lang="en">

<%= stylesheet_link_tag 'css/nucleo-icons.css', media: 'all', 'data-turbolinks-track' => true %>
<%= javascript_include_tag "bootstrap-datepicker.min" %>
<!--
<%= stylesheet_link_tag 'jquery-ui.css', media: 'all', 'data-turbolinks-track' => true %>
<%= javascript_include_tag "jquery-3.4.1.min.js" %>
<%= javascript_include_tag "jquery-ui.js" %> -->

<!-- <%= image_tag("apple-icon.png") %> -->
<link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
<!--   Core JS Files   -->

<script src="assets/chart2.js"></script>
<script src="assets/dashboard.js"></script>
<script src="assets/jquery-3.4.1.min.js"></script>
<script src="assets/jquery-ui.js"></script>
<script src="assets/popper.min.js"></script>
<script src="assets/bootstrap.min.js"></script>

<%= javascript_include_tag "other/bootstrap-notify.js" %>
<%= javascript_include_tag "dashboard-main.js" %>


<link rel="stylesheet" href="assets/jquery-ui.css">
<!-- <script src="assets/jquery-3.4.1.min.js"></script> -->
<script src="assets/jquery-ui.js"></script>
<script src="assets/chart2.js"></script>


<%= javascript_include_tag "chart.js" %>
<%= javascript_include_tag "dashboard-func.js" %>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="../assets/apple-icon.png">
  <link rel="icon" type="image/svg" href="../assets/favicon.svg">

  <title>
    LUDI-APM
  </title>
  <!--     Fonts and icons     -->
  <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,600,700,800" rel="stylesheet" />



</head>

<body class="" data-turbolinks="false">
  <div class="wrapper">
    <div class="sidebar">
      <!--
        Tip 1: You can change the color of the sidebar using: data-color="blue | green | orange | red"
    -->
      <div class="sidebar-wrapper">
        <div class="logo">
          <a href="javascript:void(0)" class="simple-text logo-mini">
           <img src="assets/ludi_logo.svg"></img>
          </a>
          <a href="javascript:void(0)" class="simple-text logo-normal">
            LUDI-APM v.1
          </a>
        </div>
        <ul class="nav">
          <li>
            <a href="dashboard">
              <i class="tim-icons icon-chart-pie-36"></i>

              <p>대시보드</p>
            </a>
          </li>
          <li>
            <a href="./sub_item">
              <i class="tim-icons icon-chart-bar-32"></i>
              <p>서브 대시보드</p>
            </a>
          </li>
          <li>
            <a href="./net_map">
              <i class="tim-icons icon-pin"></i>
              <p>네트워크 맵(준비중)</p>
            </a>
          </li>

          <li class="active" >
            <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseUtilities" aria-expanded="false" aria-controls="collapseUtilities" >
                <i class="tim-icons icon-bell-55"></i>
              <p>알림 & 임계치 설정</p>
            </a>

            <div id="collapseUtilities" class="collapse"  >

          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          <a sytle="text-align: center;" class="collapse-item" href="th_infra" ><font text-align="right" size="1em" color="white"> > 인프라 모니터링</font></a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

          <a class="collapse-item" href="th_app"><font size="1em" color="white"> > 알림 채널</font></a><br>

              </div>
          </li>


          <li>
          <a href="event_history">
            <i class="tim-icons icon-double-left"></i>
            <p>이벤트 히스토리</p>
          </a>
          </li>

          <li>
            <a href="register">
              <i class="tim-icons icon-bullet-list-67"></i>
              <p>모니터링 등록 및 관리</p>
            </a>
          </li>
          <!-- Divider -->
          <hr class="sidebar-divider">


          <li>
            <a href="./guide">
              <i class="tim-icons icon-paper"></i>
              <p>가이드</p>
            </a>
          </li>
          <li>
            <a href="./report">
              <i class="tim-icons icon-single-copy-04"></i>
              <p>보고서</p>
            </a>
          </li>
          <li>

          </li>
        </ul>
      </div>
    </div>
    <div class="main-panel">
      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg navbar-absolute navbar-transparent">
        <div class="container-fluid">
          <div class="navbar-wrapper">
            <div class="navbar-toggle d-inline">
              <button type="button" class="navbar-toggler">
                <span class="navbar-toggler-bar bar1"></span>
                <span class="navbar-toggler-bar bar2"></span>
                <span class="navbar-toggler-bar bar3"></span>
              </button>
            </div>
            <a class="navbar-brand" href="/dashboard">
              <img src="assets/report_logo.png" width="70%"></img>

            </a>
          </div>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-bar navbar-kebab"></span>
            <span class="navbar-toggler-bar navbar-kebab"></span>
            <span class="navbar-toggler-bar navbar-kebab"></span>
          </button>
          <div class="collapse navbar-collapse" id="navigation">
            <ul class="navbar-nav ml-auto">

              <li class="dropdown nav-item">
                <a href="#" class="dropdown-toggle nav-link" data-toggle="dropdown">
                  <div class="photo">
                    <i class="tim-icons icon-single-02"> </i>
                  </div>
                  <b class="caret d-none d-lg-block d-xl-block"></b>
                  <p class="d-lg-none">
                    로그 아웃
                  </p>
                </a>
                <ul class="dropdown-menu dropdown-navbar">
                  <li class="nav-link"><a href="javascript:void(0)" class="nav-item dropdown-item">프로필</a></li>
                  <li class="nav-link"><a href="javascript:void(0)" class="nav-item dropdown-item">셋팅</a></li>
                  <li class="dropdown-divider"></li>
                  <li class="nav-link"><a href="javascript:void(0)" class="nav-item dropdown-item">로그 아웃</a></li>
                </ul>
              </li>
              <li class="separator d-lg-none"></li>
            </ul>
          </div>
        </div>
      </nav>
      <div class="modal modal-search fade" id="searchModal" tabindex="-1" role="dialog" aria-labelledby="searchModal" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <input type="text" class="form-control" id="inlineFormInputGroup" placeholder="SEARCH">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <i class="tim-icons icon-simple-remove"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
      <!-- End Navbar -->







      <div class="content">
        <div class="col-md-13">
          <div class="card">
            <div class="card-body">
    <!-- sub title -->
    <div> 현재시간: <%= Time.now %> </div><br>
    <div id="result"> 현재시간2:<%= Time.now %> </div>
    <%= link_to '업데이트', { action: :upanel }, remote: true %>
                <div class="row">
                  <div class="col-md-6 ml-auto mr-auto text-center">
                    <h4 class="card-title">
                      Infrastructure Monitoring [ 인프라스트럭처 모니터링 ]
<%= @test_data %>
                    </h4>
                  </div>
                </div>
    <!-- sub title end-->


              </div>
            </div>
          </div>
        <div class="row">
          <div class="col-md-6">
            <div class="card">


                <!-- thresholds_Items_process_count -->
                <div class="card shadow mb-4">
                  <div class="card-header py-3">
                    <span class="m-0 font-weight-bold text-primary" sytle=" margin-bottom=3px;">프로세스 개수
                    <span style="float:right; display: inline;" >
                      <button type="button" class="btn btn-primary btn-xs dropdown-toggle" data-toggle="collapse" data-target="#card-body-content-prc-count"></button>
                    </span>
                    </span>

                  </div>

                <div class="collapse" id="card-body-content-prc-count">
                  <div class="card-body">
                    <div id="infra_prc_count" style="">


                      <%= form_tag "/th_infra", :name => "prc_count_status" ,  method: :post  do %>

                      <% if @result_view_status_prc_count  == '0' %>

                      <label><input name="prc_count_status" id="prc_count_status" type="checkbox"  checked data-toggle="toggle" value="on" onchange="toggle_change_prc_count()" >&nbsp;&nbsp;켜짐</label>

                      <% else %>

                      <lable><input name="prc_count_status" id="prc_count_status" type="checkbox" data-toggle="toggle" value="off" onchange="toggle_change_prc_count()" >&nbsp;&nbsp;꺼짐</lable>

                      <% end %>

                      <!-- detect toggle action -->
                      <script type="text/javascript">

                        var state_val = $('#prc_count_status').prop("checked");

                        function toggle_change_prc_count(){

                          alert("test")

                          document.prc_count_status.submit();




                        }


                      </script>
                      <% end %>

                      <br>
                      <strong>ITEM : <%= @ret_val_trigger_name_prc_count %></strong><br><br>
                      <strong>현재 적용된 수치 : <%= @result_val_prc_count%>개</strong><br><br>

                      <%= form_tag "/dashboard/th_infra", method: :post do %>

                      <output name="infra_prc_count_output" class="output" ><%= @result_val_prc_count%></output>
                      <input name="prc_count" id="th_val" type="range" min="1" value="<%= @result_val_prc_count%>" max="500" step="3" list="ticks" oninput="infra_prc_count_output.value = prc_count.value" /><br>
                      <input class="btn btn-primary" type="submit" value="적용" >
                      <% end %>
                      <br>

                    </div>
                  </div>
                </div>

            <!-- prc_count end -->



              </div>
            </div>
          </div>

          <div class="col-md-6">
            <div class="card">

              <!-- thresholds_Items_CPU -->
               <div class="card shadow mb-4">
                 <div class="card-header py-3">
                   <span class="m-0 font-weight-bold text-primary" sytle=" margin-bottom=3px;">CPU 사용량
                   <span style="float:right; display: inline;" >
                     <button type="button" class="btn btn-primary btn-xs dropdown-toggle" data-toggle="collapse" data-target="#card-body-content-prc-load"></button>
                   </span>
                   </span>
                 </div>

                 <div class="collapse" id="card-body-content-prc-load">
                 <div class="card-body">

                   <div id="infra_prc_load" >

                     <!-- <%= @result_view_status_prc_load %> -->
                     <!-- toggle-trigger -->

                     <%= form_tag "/dashboard/th_infra", :name => "prc_load_status" ,  method: :post  do %>

                     <% if @result_view_status_prc_load  == '0' %>

                     <label><input name="prc_load_status" id="prc_load_status" type="checkbox"  checked data-toggle="toggle" value="on" onchange="toggle_change_prc_load()" >&nbsp;&nbsp;켜짐</label>

                     <% else %>

                     <lable><input name="prc_load_status" id="prc_load_status" type="checkbox" data-toggle="toggle" value="off" onchange="toggle_change_prc_load()" >&nbsp;&nbsp;꺼짐</lable>

                     <% end %>
                     <!-- detect toggle action -->
                     <script type="text/javascript">

                       var state_val = $('#prc_load_status').prop("checked");

                       function toggle_change_prc_load(){

                         alert("test")

                         document.prc_load_status.submit();




                       }


                     </script>
                     <% end %>


                     <br>

                     <strong>ITEM : <%= @ret_val_trigger_name_prc_load %></strong><br><br>
                     <strong>현재 적용된 수치 : <%= @result_val_prc_load%>%</strong><br><br>

                     <%= form_tag "/ludiapm_dashboard/th_infra", method: :post do %>

                     <output name="infra_prc_load_output" class="output" ><%= @result_val_prc_load%></output>
                     <input name="prc_load" id="th_val" type="range" min="1" value="<%= @result_val_prc_load%>" max="100" step="3" list="ticks" oninput="infra_prc_load_output.value = prc_load.value" />
                     <input class="btn btn-primary" type="submit" value="적용" >
                     <% end %>



                     <br>

                   </div>
                 </div>
               </div>

             </div>
           </div>
      </div>
      </div> <!-- one row items finished -->

<div class="row">

<div class="col-md-6">
          <div class="card">
            <!-- thresholds_Items_Disk_I/O overhead -->
             <div class="card shadow mb-4">
               <div class="card-header py-3">

                 <span class="m-0 font-weight-bold text-primary" sytle=" margin-bottom=3px;"> Disk I/O 오버헤드
                 <span style="float:right; display: inline;" >
                   <button type="button" class="btn btn-primary btn-xs dropdown-toggle" data-toggle="collapse" data-target="#card-body-content-infra_disk_io"></button>
                 </span>
                 </span>


               </div>

             <div class="collapse" id="card-body-content-infra_disk_io">
               <div class="card-body">
                  <div id="infra_disk_io" style="">


                   <%= form_tag "/ludiapm_dashboard/th_infra", :name => "disk_io_overhead_status" ,  method: :post  do %>

                   <% if @result_view_status_disk_io_overhead  == '0' %>

                   <label><input name="disk_io_overhead_status" id="disk_io_overhead_status" type="checkbox"  checked data-toggle="toggle" value="on" onchange="toggle_change_disk_io_overhead()" >&nbsp;&nbsp;켜짐</label>

                   <% else %>

                   <lable><input name="disk_io_overhead_status" id="disk_io_overhead_status" type="checkbox" data-toggle="toggle" value="off" onchange="toggle_change_disk_io_overhead()" >&nbsp;&nbsp;꺼짐</lable>

                   <% end %>
                   <!-- detect toggle action -->
                   <script type="text/javascript">

                     var state_val = $('#disk_io_overhead_status').prop("checked");

                     function toggle_change_disk_io_overhead(){

                       alert("test")

                       document.disk_io_overhead_status.submit();




                     }


                   </script>
                   <br>
                   <% end %>

                   <br>
                   <strong>ITEM : <%= @ret_val_trigger_name_disk_io_overhead %></strong><br><br>
                   <strong>현재 적용된 수치 : <%= @result_val_disk_io_overhead %>%</strong><br><br>

                   <%= form_tag "th_infra", method: :post do %>

                   <output name="infra_disk_io_overhead_output" class="output" ><%= @result_val_disk_io_overhead%></output>
                   <input name="disk_io_overhead" id="th_val" type="range" min="1" value="<%= @result_val_disk_io_overhead %>" max="100" step="3" list="ticks" oninput="infra_disk_io_overhead_output.value = disk_io_overhead.value" />
                   <input class="btn btn-primary" type="submit" value="적용" >
                   <% end %>


                   <br>

                 </div>
               </div>
             </div>
           </div>
           </div>
           </div>



           <!-- disk_io_overhead end -->
           <div class="col-md-6">
           <div class="card">
             <!-- thresholds_Items_Memory_usage -->
              <div class="card shadow mb-4">
                <div class="card-header py-3">
                  <span class="m-0 font-weight-bold text-primary" sytle=" margin-bottom=3px;"> Memory 사용량
                  <span style="float:right; display: inline;" >
                    <button type="button" class="btn btn-primary btn-xs dropdown-toggle" data-toggle="collapse" data-target="#card-body-content-infra_memory_usage"></button>
                  </span>
                </span>
                </div>
              <div class="collapse" id="card-body-content-infra_memory_usage">
                <div class="card-body">
                  <div id="infra_memory_usage" >

                    <%= form_tag "/ludiapm_dashboard/th_infra", :name => "memory_usage_status" ,  method: :post  do %>

                    <% if @result_view_status_memory_usage  == '0' %>

                    <label><input name="memory_usage_status" id="memory_usage_status" type="checkbox"  checked data-toggle="toggle" value="on" onchange="toggle_change_memory_usage()" >&nbsp;&nbsp;켜짐</label>

                    <% else %>

                    <lable><input name="memory_usage_status" id="memory_usage_status" type="checkbox" data-toggle="toggle" value="off" onchange="toggle_change_memory_usage()" >&nbsp;&nbsp;꺼짐</lable>

                    <% end %>
                    <!-- detect toggle action -->
                    <script type="text/javascript">

                      var state_val = $('#memory_usage_status').prop("checked");

                      function toggle_change_memory_usage(){

                        alert("test")

                        document.memory_usage_status.submit();




                      }


                    </script>
                    <% end %>


                    <br>
                    <strong>ITEM : <%= @ret_val_trigger_name_memory_usage %></strong><br><br>
                    <strong>현재 적용된 수치 : <%= @result_val_memory_usage%>%</strong><br><br>

                    <%= form_tag "/ludiapm_dashboard/th_infra", method: :post do %>

                    <output name="infra_memory_usage_output" class="output" ><%= @result_val_memory_usage%></output>
                    <input name="memory_usage" id="th_val" type="range" min="1" value="<%= @result_val_memory_usage%>" max="100" step="3" list="ticks" oninput="infra_memory_usage_output.value = memory_usage.value" />
                    <input class="btn btn-primary" type="submit" value="적용" >
                    <% end %>


                    <br>

                  </div>
              </div>
            </div>

          </div>
          </div>







  <div class="fixed-plugin">
    <div class="dropdown show-dropdown">

      <a href="#" data-toggle="dropdown">
         <i class="fa fa-cog fa-2x"> </i>
      </a>

      <ul class="dropdown-menu">
        <li class="header-title"> 사이드바 테마 선택</li>
        <li class="adjustments-line">
          <a href="javascript:void(0)" class="switch-trigger background-color">
            <div class="badge-colors text-center">
              <span class="badge filter badge-primary active" data-color="primary"></span>
              <span class="badge filter badge-info" data-color="blue"></span>
              <span class="badge filter badge-success" data-color="green"></span>
            </div>
            <div class="clearfix"></div>
          </a>
        </li>
        <li class="adjustments-line text-center color-change">
          <span class="color-label">White 테마</span>
          <span class="badge light-badge mr-2"></span>
          <span class="badge dark-badge ml-2"></span>
          <span class="color-label">DARK 테마</span>
        </li>

        <li class="header-title">LUDI-APM</li>
        <li class="button-container text-center">
          <br>
          <br>

        </li>
      </ul>
    </div>
  </div>





  <script>
    $(document).ready(function() {
      $().ready(function() {
        $sidebar = $('.sidebar');
        $navbar = $('.navbar');
        $main_panel = $('.main-panel');

        $full_page = $('.full-page');

        $sidebar_responsive = $('body > .navbar-collapse');
        sidebar_mini_active = true;
        white_color = false;

        window_width = $(window).width();

        fixed_plugin_open = $('.sidebar .sidebar-wrapper .nav li.active a p').html();



        $('.fixed-plugin a').click(function(event) {
          if ($(this).hasClass('switch-trigger')) {
            if (event.stopPropagation) {
              event.stopPropagation();
            } else if (window.event) {
              window.event.cancelBubble = true;
            }
          }
        });

        $('.fixed-plugin .background-color span').click(function() {
          $(this).siblings().removeClass('active');
          $(this).addClass('active');

          var new_color = $(this).data('color');

          if ($sidebar.length != 0) {
            $sidebar.attr('data', new_color);
          }

          if ($main_panel.length != 0) {
            $main_panel.attr('data', new_color);
          }

          if ($full_page.length != 0) {
            $full_page.attr('filter-color', new_color);
          }

          if ($sidebar_responsive.length != 0) {
            $sidebar_responsive.attr('data', new_color);
          }
        });

        $('.switch-sidebar-mini input').on("switchChange.bootstrapSwitch", function() {
          var $btn = $(this);

          if (sidebar_mini_active == true) {
            $('body').removeClass('sidebar-mini');
            sidebar_mini_active = false;
            blackDashboard.showSidebarMessage('Sidebar mini deactivated...');
          } else {
            $('body').addClass('sidebar-mini');
            sidebar_mini_active = true;
            blackDashboard.showSidebarMessage('Sidebar mini activated...');
          }

          // we simulate the window Resize so the charts will get updated in realtime.
          var simulateWindowResize = setInterval(function() {
            window.dispatchEvent(new Event('resize'));
          }, 180);

          // we stop the simulation of Window Resize after the animations are completed
          setTimeout(function() {
            clearInterval(simulateWindowResize);
          }, 1000);
        });

        $('.switch-change-color input').on("switchChange.bootstrapSwitch", function() {
          var $btn = $(this);

          if (white_color == true) {

            $('body').addClass('change-background');
            setTimeout(function() {
              $('body').removeClass('change-background');
              $('body').removeClass('white-content');
            }, 900);
            white_color = false;
          } else {

            $('body').addClass('change-background');
            setTimeout(function() {
              $('body').removeClass('change-background');
              $('body').addClass('white-content');
            }, 900);

            white_color = true;
          }


        });

        $('.light-badge').click(function() {
          $('body').addClass('white-content');
        });

        $('.dark-badge').click(function() {
          $('body').removeClass('white-content');
        });
      });
    });
  </script>
  <script>
    $(document).ready(function() {
      // Javascript method's body can be found in assets/js/demos.js
      demo.initDashboardPageCharts();

    });
  </script>



</body>

</html>
